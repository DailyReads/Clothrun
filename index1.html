<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClothRun â€” Premium Cloth Store</title>
  <link rel="icon" type="image/png" href="Keyloops_20251026_201720_0000.png">
  <style>
/* âœ… All CSS â€” updated for clarity & visibility in modal */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
html, body { width: 100%; overflow-x: hidden; }
body { background: #ffffff; color: #000; }
/* ========== HEADER ========== */
header {
  text-align: center;
  padding: 60px 20px;
  background: linear-gradient(135deg, #d4a373, #ccd5ae);
  color: #fff;
  position: relative;
}
@media (min-width: 1024px) {
  header { text-align: left; padding: 40px 60px; }
  header h1 { font-size: 48px; margin-bottom: 10px; }
}
/* ========== CATEGORY BUTTONS ========== */
.categories {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  margin: 24px 0;
  padding: 0 20px;
}
.category-btn {
  background: #f8f9fa;
  color: #555;
  border: 2px solid #e0e0e0;
  border-radius: 30px;
  padding: 8px 20px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
}
.category-btn:hover {
  background: #e9ecef;
  border-color: #d4a373;
  color: #d4a373;
}
.category-btn.active {
  background: #d4a373;
  color: white;
  border-color: #c49668;
  box-shadow: 0 4px 8px rgba(212, 163, 115, 0.2);
}
/* ========== SECTION TITLE ========== */
.section-title {
  font-size: 24px;
  font-weight: 700;
  color: #222;
  text-align: center;
  margin: 40px 0 24px;
  position: relative;
}
.section-title::after {
  content: '';
  display: block;
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #d4a373, #ccd5ae);
  margin: 8px auto 0;
  border-radius: 3px;
}
/* ========== SPECIAL PROMO TITLE ========== */
.special-promo-title {
  font-size: 22px;
  font-weight: 600;
  color: #d4a373;
  text-align: center;
  margin-bottom: 20px;
}
.special-promo-title span {
  background: linear-gradient(135deg, #d4a373, #ccd5ae);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  font-weight: 700;
}
/* ========== SEARCH CONTAINER ========== */
.search-container {
  max-width: 600px;
  margin: 30px auto;
  padding: 0 20px;
}
.search-box {
  position: relative;
  width: 100%;
}
#searchInput {
  width: 100%;
  padding: 12px 40px 12px 40px;
  border: 2px solid #ddd;
  border-radius: 25px;
  font-size: 16px;
  outline: none;
  transition: 0.3s;
}
#searchInput:focus {
  border-color: #d4a373;
  box-shadow: 0 0 10px rgba(212, 163, 115, 0.3);
}
.search-icon {
  position: absolute;
  left: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  pointer-events: none;
}
.search-clear {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 20px;
  color: #999;
  cursor: pointer;
  display: none;
  transition: 0.2s;
}
.search-clear:hover {
  color: #333;
}
/* ========== CART BUTTON ========== */
.cart-btn { 
  background: none; 
  border: none; 
  cursor: pointer; 
  position: fixed; 
  top: 20px; 
  right: 20px; 
  z-index: 999;
  font-size: 24px;
}
.cart-count {
  position: absolute; 
  top: -8px; 
  right: -8px;
  background: red; 
  color: white; 
  border-radius: 50%;
  width: 20px; 
  height: 20px; 
  display: flex;
  align-items: center; 
  justify-content: center;
  font-size: 12px; 
  font-weight: bold;
  display: none;
}
/* ========== SECTION ========== */
.section { 
  padding: 40px 20px; 
  max-width: 1000px; 
  margin: auto; 
}
/* ========== PRODUCTS ========== */
.product-grid { 
  display: grid; 
  grid-template-columns: repeat(2, 1fr); 
  gap: 20px; 
}
@media (min-width: 768px) {
  .product-grid { 
    grid-template-columns: repeat(4, 1fr); 
  }
}
.product-card {
  position: relative;
  background: #fff; 
  overflow: hidden;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
  padding: 15px;
  text-align: center; 
  transition: 0.3s;
}
.product-card:hover { 
  transform: translateY(-2px); 
}
.product-card.hidden { 
  display: none; 
}
.product-card img { 
  width: 100%; 
  aspect-ratio: 1 / 1;
  object-fit: contain;
  object-position: center;
  border-radius: 0; /* âœ… no corner */
  background-color: #f8f9fa;
}
.product-name { 
  font-size: 16px; 
  font-weight: 600; 
  margin: 10px 0; 
}
.product-price { 
  font-size: 16px; 
  font-weight: 500;
  color: #000;
  margin-bottom: 10px;
}
.product-price s {
  color: #000;
  opacity: 0.6;
  font-size: 15px;
  display: block;
  margin-bottom: 2px;
}
.product-price strong {
  color: #000;
  font-weight: 700;
  font-size: 17px;
}
.product-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background: linear-gradient(135deg, #d4a373, #ccd5ae);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.product-badge::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(135deg, #d4a373, #ccd5ae);
  border-radius: 14px;
  z-index: -1;
  opacity: 0.3;
}
.add-btn { 
  background: #000; 
  color: #fff; 
  border: none; 
  padding: 8px 14px; 
  border-radius: 20px; 
  cursor: pointer; 
  font-size: 14px; 
}
.add-btn:hover { 
  background: #444; 
}
/* ========== NO RESULTS ========== */
.no-results {
  text-align: center;
  padding: 40px 20px;
  color: #666;
  display: none;
}
.no-results h3 { 
  font-size: 24px; 
  margin-bottom: 10px; 
}
.no-results p { 
  font-size: 16px; 
}
/* ========== CART SECTION ========== */
.cart-section { 
  display: none; 
  background: #f8f9fa;
  position: fixed;
  top: 0;
  right: 0;
  width: 100%;
  height: 100%;  
  z-index: 1000;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
@media (min-width: 1024px) {
  .cart-section {
    width: 60%;
    height: auto;
    max-height: 90vh;
    top: 5%;
    bottom: auto;
    left: auto;
    right: 5%;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  }
  .cart-content {
    max-height: 70vh;
    overflow-y: auto;
  }
}
.cart-header {
  background: linear-gradient(135deg, #d4a373, #ccd5ae);
  color: white;
  padding: 20px;
  text-align: center;
  position: relative;
}
.cart-header h1 {
  font-size: 28px;
  font-weight: 700;
  margin: 0;
}
.cart-header p {
  margin-top: 5px;
  opacity: 0.9;
  font-size: 16px;
}
.close-cart {
  position: absolute;
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: white;
  font-size: 28px;
  cursor: pointer;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: 0.3s;
}
.close-cart:hover {
  background: rgba(255, 255, 255, 0.2);
}
/* ========== CUSTOMER FORM ========== */
.cart-content {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}
.customer-form {
  background: white;
  border-radius: 15px;
  padding: 25px;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.customer-form h3 {
  margin-bottom: 20px;
  font-size: 20px;
  color: #333;
}
.form-row {
  display: grid;
  grid-template-columns: 1fr;
  gap: 15px;
  margin-bottom: 15px;
}
@media (min-width: 768px) {
  .form-row {
    grid-template-columns: 1fr 1fr;
  }
}
.input-field { 
  width: 100%; 
  padding: 12px 15px; 
  border: 2px solid #e0e0e0; 
  border-radius: 10px; 
  font-size: 16px; 
  transition: 0.3s;
  outline: none;
}
.input-field:focus {
  border-color: #d4a373;
  box-shadow: 0 0 5px rgba(212, 163, 115, 0.3);
}
.promo-section {
  display: flex;
  gap: 10px;
  align-items: center;
}
.promo-section .input-field {
  flex: 1;
}
.promo-btn {
  background: #d4a373;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: 0.3s;
  white-space: nowrap;
}
.promo-btn:hover {
  background: #c49668;
}
.promo-message {
  font-size: 14px;
  color: red;
  margin-left: 8px;
}
@media (max-width: 768px) {
  .promo-section {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
  .promo-message {
    order: 3;
    margin-left: 0;
    text-align: center;
    width: 100%;
    font-size: 13px;
  }
}
/* ========== RECEIPT ========== */
.receipt-container { 
  background: #fff; 
  border-radius: 15px; 
  box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
  overflow: hidden;
  margin-top: auto;
}
.receipt-header { 
  background: linear-gradient(135deg, #ca9b6c);
  padding: 20px; 
  color: white; 
  text-align: center; 
}
.receipt-title {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 5px;
}
.receipt-subtitle {
  opacity: 0.8;
  font-size: 16px;
}
.receipt-items { 
  padding: 20px; 
  min-height: 200px; 
}
.receipt-item { 
  display: flex; 
  justify-content: space-between; 
  align-items: center;
  padding: 15px 0; 
  border-bottom: 1px dashed #e0e0e0;
  gap: 12px;
}
.item-image {
  width: 70px;
  height: 70px;
  object-fit: cover;
  border-radius: 8px;
  flex-shrink: 0;
}
@media (min-width: 1024px) {
  .item-image {
    width: 90px;
    height: 90px;
  }
}
.receipt-item:last-child {
  border-bottom: none;
}
.item-info {
  flex: 1;
}
.item-name {
  font-weight: 600;
  margin-bottom: 5px;
}
.item-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 5px;
}
.qty-btn { 
  background: #000; 
  color: #fff; 
  border: none; 
  border-radius: 50%; 
  width: 28px; 
  height: 28px; 
  font-weight: bold; 
  cursor: pointer; 
  display: flex;
  align-items: center;
  justify-content: center;
  transition: 0.3s;
}
.qty-btn:hover {
  background: #333;
}
.quantity {
  min-width: 30px;
  text-align: center;
  font-weight: 600;
}
.item-price {
  font-weight: 700;
  color: #333;
  min-width: 80px;
  text-align: right;
}
.receipt-summary {
  border-top: 2px solid #e0e0e0;
  padding: 20px;
  background: #f8f9fa;
}
.summary-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  font-size: 16px;
}
.summary-row.total {
  font-size: 20px;
  font-weight: 700;
  border-top: 1px solid #ddd;
  padding-top: 10px;
  margin-top: 15px;
  margin-bottom: 0;
}
.checkout-btn {
  background: #000000;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 30px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  margin-top: 20px;
  transition: 0.3s;
}
.checkout-btn:hover {
  background: #c49668;
}
.checkout-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
}
/* ========== EMPTY CART ========== */
.empty-cart {
  text-align: center;
  padding: 40px 20px;
  color: #666;
}
.empty-cart-icon {
  font-size: 48px;
  margin-bottom: 20px;
  color: #ccc;
}
.empty-cart h3 {
  font-size: 24px;
  margin-bottom: 10px;
  color: #333;
}
.empty-cart p {
  font-size: 16px;
  margin-bottom: 20px;
}
.continue-shopping {
  background: #d4a373;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 25px;
  font-size: 16px;
  cursor: pointer;
  transition: 0.3s;
}
.continue-shopping:hover {
  background: #c49668;
}
/* ========== FOOTER ========== */
footer { 
  background: #ccd5ae; 
  padding: 25px; 
  text-align: left; 
  margin-top: 40px; 
  border-top-left-radius: 40px; 
  border-top-right-radius: 40px; 
}
footer h2 { 
  font-size: 20px; 
  margin-bottom: 10px; 
}
footer p { 
  margin: 5px 0; 
  font-size: 14px; 
}
.footer-content {
  flex-wrap: wrap;
  gap: 1.5rem;
}
.footer-column {
  flex: 1 1 45%;
  min-width: 150px;
}
@media (max-width: 480px) {
  .footer-column {
    flex: 1 1 100%;
  }
}
/* ========== PRODUCT ACTIONS ========== */
.product-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
  width: 100%;
}
.details-btn-product {
  background: transparent;
  color: #d4a373;
  border: 2px solid #d4a373;
  padding: 8px 14px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 14px;
  transition: 0.3s;
  text-decoration: none;
  display: inline-block;
  text-align: center;
}
.details-btn-product:hover {
  background: #d4a373;
  color: white;
}
/* ========== PRODUCT DETAILS MODAL ========== */
.product-details-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #fafafa;
  z-index: 2000;
  overflow-y: auto;
  padding: 16px;
}
.product-details-modal.active {
  display: block;
}
.close-details-btn {
  width: 32px;
  height: 32px;
  cursor: pointer;
  position: fixed;
  top: 16px;
  left: 16px;
  z-index: 2001;
  transition: transform 0.2s;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border: none;
}
.close-details-btn:hover {
  transform: scale(1.1);
}
/* âœ… FIX TITLE POSITION */
.modal-header {
  text-align: center;
  margin-top: 20px;
  margin-bottom: 24px;
}
.page-title-details {
  font-size: 28px;
  font-weight: 700;
  color: #000;
  text-align: center;
}
@media (max-width: 768px) {
  .modal-header {
    margin-top: 50px;
  }
  .page-title-details {
    font-size: 24px;
  }
}
/* ========== PRODUCT SECTION DETAILS ========== */
.product-section-details {
  display: flex;
  flex-direction: column;
  gap: 32px;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}
@media (min-width: 1024px) {
  .product-section-details {
    flex-direction: row;
    align-items: flex-start;
    padding: 0 40px;
  }
}
/* ========== IMAGE SLIDER CONTAINER ========== */
.image-slider-container {
  position: relative;
  width: 100%;
  max-width: 500px;
  flex-shrink: 0;
}
@media (min-width: 1024px) {
  .image-slider-container {
    margin: 0;
  }
}
.image-slider-details {
  display: flex;
  overflow: hidden;
  width: 100%;
  border-radius: 12px;
  background: white;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  padding: 10px;
  position: relative;
}
.image-slider-details img {
  width: 100%;
  max-width: 460px;
  aspect-ratio: 4 / 3;
  object-fit: contain;
  object-position: center;
  border-radius: 8px;
  flex-shrink: 0;
  display: none;
  background-color: #f8f9fa;
}
.image-slider-details img.active {
  display: block;
}
/* ========== SLIDER NAVIGATION BUTTONS ========== */
.slider-nav-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.9);
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 20px;
  font-weight: bold;
  color: #333;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  transition: all 0.3s;
  z-index: 10;
}
.slider-nav-btn:hover {
  background: rgba(212, 163, 115, 0.9);
  color: white;
  transform: translateY(-50%) scale(1.1);
}
.slider-nav-btn:active {
  transform: translateY(-50%) scale(0.95);
}
.slider-nav-btn.prev {
  left: 10px;
}
.slider-nav-btn.next {
  right: 10px;
}
.slider-nav-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}
.slider-nav-btn:disabled:hover {
  background: rgba(255, 255, 255, 0.9);
  color: #333;
  transform: translateY(-50%) scale(1);
}
/* ========== IMAGE COUNTER ========== */
.image-counter {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.6);
  color: white;
  padding: 5px 15px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  z-index: 10;
}
/* ========== DOTS NAVIGATION ========== */
.slider-dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 15px;
}
.slider-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #ddd;
  cursor: pointer;
  transition: all 0.3s;
}
.slider-dot.active {
  background: #d4a373;
  width: 12px;
  height: 12px;
}
.slider-dot:hover {
  background: #c49668;
}
/* ========== PRODUCT INFO DETAILS ========== */
.product-info-details {
  flex: 1;
  min-width: 300px;
  max-width: 600px;
}
@media (min-width: 1024px) {
  .product-info-details {
    text-align: left;
    max-width: none;
    flex: 1;
    padding-left: 20px;
  }
}
.section-title-details {
  font-size: 14px;
  font-weight: 600;
  color: #888;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  margin-bottom: 8px;
  margin-top: 20px;
}
.section-title-details:first-child {
  margin-top: 0;
}
.product-title-details {
  font-size: 28px;
  font-weight: 700;
  color: #222;
  margin-bottom: 16px;
  line-height: 1.3;
}
@media (max-width: 768px) {
  .product-title-details {
    font-size: 24px;
  }
}
.product-price-details {
  color: #d4a373;
  font-size: 26px;
  font-weight: bold;
  margin-bottom: 20px;
}
.product-description-details {
  font-size: 16px;
  color: #555;
  line-height: 1.7;
  margin-bottom: 24px;
}
.add-to-cart-details-btn {
  background-color: #000000;
  color: white;
  border: none;
  padding: 16px 32px;
  font-size: 16px;
  font-weight: 600;
  border-radius: 30px;
  cursor: pointer;
  margin-top: 16px;
  width: 100%;
  max-width: 300px;
  transition: background-color 0.3s, transform 0.2s;
}
.add-to-cart-details-btn:hover {
  background-color: #c49668;
  transform: translateY(-2px);
}
/* ========== SIZE SELECTION MODAL ========== */
.size-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  z-index: 3000;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(5px);
}
.size-modal.active {
  display: flex;
}
.size-modal-content {
  background: white;
  border-radius: 20px;
  padding: 30px;
  max-width: 450px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  animation: modalSlideIn 0.3s ease-out;
}
@keyframes modalSlideIn {
  from {
    transform: translateY(-50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
.size-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 2px solid #f0f0f0;
}
.size-modal-title {
  font-size: 22px;
  font-weight: 700;
  color: #333;
}
.size-modal-close {
  background: none;
  border: none;
  font-size: 28px;
  color: #999;
  cursor: pointer;
  width: 35px;
  height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s;
}
.size-modal-close:hover {
  background: #f0f0f0;
  color: #333;
}
.size-product-info {
  display: flex;
  gap: 15px;
  margin-bottom: 25px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 12px;
}
.size-product-image {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 10px;
  flex-shrink: 0;
}
.size-product-details {
  flex: 1;
}
.size-product-name {
  font-size: 16px;
  font-weight: 600;
  color: #333;
  margin-bottom: 5px;
}
.size-product-price {
  font-size: 18px;
  font-weight: 700;
  color: #d4a373;
}
.size-selection-label {
  font-size: 16px;
  font-weight: 600;
  color: #333;
  margin-bottom: 15px;
  display: block;
}
.size-options {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-bottom: 25px;
}
@media (max-width: 480px) {
  .size-options {
    grid-template-columns: repeat(3, 1fr);
  }
}
.size-option {
  background: white;
  border: 2px solid #e0e0e0;
  padding: 12px;
  border-radius: 10px;
  cursor: pointer;
  text-align: center;
  font-size: 16px;
  font-weight: 600;
  color: #333;
  transition: all 0.3s;
}
.size-option:hover {
  border-color: #d4a373;
  background: #fef9f5;
  transform: translateY(-2px);
}
.size-option.selected {
  background: #d4a373;
  border-color: #d4a373;
  color: white;
}
.size-option.out-of-stock {
  background: #f5f5f5;
  border-color: #e0e0e0;
  color: #999;
  cursor: not-allowed;
  text-decoration: line-through;
}
.size-option.out-of-stock:hover {
  transform: none;
  background: #f5f5f5;
  border-color: #e0e0e0;
}
.size-confirm-btn {
  width: 100%;
  background: #000000;
  color: white;
  border: none;
  padding: 15px;
  border-radius: 30px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}
.size-confirm-btn:hover {
  background: #c49668;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(212, 163, 115, 0.3);
}
.size-confirm-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
  transform: none;
}
.size-error-message {
  color: #e74c3c;
  font-size: 14px;
  text-align: center;
  margin-top: 10px;
  display: none;
}
/* ========== COLOR SELECTION ========== */
.color-selection {
  margin-top: 24px;
}
.color-options {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 10px;
}
.color-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}
.color-swatch {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid #ddd;
  margin-bottom: 6px;
  transition: all 0.2s;
}
.color-option:hover .color-swatch {
  transform: scale(1.1);
  border-color: #d4a373;
}
.color-option.selected .color-swatch {
  border-color: #333;
  box-shadow: 0 0 0 3px rgba(212, 163, 115, 0.4);
}
.color-label {
  font-size: 13px;
  color: #555;
}
.color-option.selected .color-label {
  font-weight: 600;
  color: #222;
}
/* âœ… PATCH: Remove product card borders/shadow & shrink on desktop */
.product-card {
  box-shadow: none !important;
  border: none !important;
  background: transparent !important;
  padding: 0 !important;
  margin: 0;
}
.product-card img {
  border-radius: 8px; /* optional: keep rounded image */
}
/* Scale down on desktop */
@media (min-width: 1024px) {
  .product-card {
    transform: scale(0.92);
    transition: transform 0.2s;
  }
  .product-card:hover {
    transform: scale(0.94) translateY(-2px);
  }
}
/* âœ… PATCH: Top-left back button & title */
.top-bar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 20px 30px;
  max-width: 1200px;
  margin: 0 auto;
}
.hamburger-btn {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  background: #f8f9fa;
  border: 1px solid #ddd;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: 0.2s;
  padding: 0;
}
.hamburger-btn:hover {
  background: #e9ecef;
  transform: scale(1.05);
}
.back-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #f8f9fa;
  border: 1px solid #ddd;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: 0.2s;
  font-weight: bold;
  color: #333;
  text-decoration: none;
}
.back-btn:hover {
  background: #e9ecef;
  transform: scale(1.05);
}
.page-title {
  font-size: 24px;
  font-weight: 700;
  color: #222;
  margin: 0;
}
/* ========== SIDEBAR ========== */
.sidebar {
  position: fixed;
  top: 0;
  left: -300px;
  width: 280px;
  height: 100%;
  background: white;
  box-shadow: 4px 0 20px rgba(0,0,0,0.1);
  z-index: 2000;
  transition: left 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  padding-top: 60px;
  overflow-y: auto;
}
.sidebar.active {
  left: 0;
}
.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1999;
  display: none;
}
.sidebar.active + .sidebar-overlay {
  display: block;
}
.sidebar-header {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  padding: 20px 24px;
  background: white;
  border-bottom: 1px solid #f0f0f0;
  z-index: 10;
}
.sidebar-logo {
  font-size: 24px;
  font-weight: 500;
  color: #222;
  margin: 0;
}
.sidebar-logo span {
  color: #d4a373;
}
.sidebar-nav {
  list-style: none;
  padding: 0;
  margin: 0;
}
.sidebar-nav li {
  padding: 0 24px;
  margin: 6px 0;
}
.sidebar-nav a {
  display: flex;
  align-items: center;
  padding: 14px 18px;
  text-decoration: none;
  color: #333;
  font-size: 17px;
  font-weight: 500;
  border-radius: 12px;
  transition: all 0.25s ease;
  position: relative;
}
.sidebar-nav a:hover {
  background: #fdf9f6;
  color: #d4a373;
}
.sidebar-nav a i {
  margin-right: 16px;
  font-size: 20px;
  width: 24px;
  text-align: center;
  color: #999;
}
.sidebar-nav a:hover i {
  color: #d4a373;
}
.sidebar-nav a.active {
  background: #fdf3ed;
  color: #d4a373;
  font-weight: 600;
}
.sidebar-close {
  position: absolute;
  top: 22px;
  right: 20px;
  background: #f9f9f9;
  border: none;
  font-size: 24px;
  color: #666;
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  transition: all 0.2s;
}
.sidebar-close:hover {
  background: #f0f0f0;
  color: #333;
  transform: rotate(90deg);
}
/* ========== ACTIVE TITLE ========== */
.section-title.active {
  color: #d4a373;
}
/* ========== COUNTDOWN TIMER ========== */
.countdown-timer-section {
  text-align: center;
  margin: 24px 0;
  padding: 12px 20px;
}
.countdown-timer-wrapper {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}
.countdown-label {
  font-size: 16px;
  font-weight: 600;
  color: #d4a373;
}
.countdown-boxes {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  justify-content: center;
}
.countdown-box {
  background: linear-gradient(135deg, #d4a373, #c49668);
  color: white;
  border-radius: 8px;
  padding: 10px 0;
  min-width: 70px;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: 0 4px 8px rgba(212, 163, 115, 0.2);
}
.countdown-box span {
  font-size: 20px;
  font-weight: 700;
  line-height: 1.2;
}
.countdown-box small {
  font-size: 11px;
  opacity: 0.9;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-top: 4px;
}

@media (max-width: 480px) {
  .countdown-box {
    min-width: 50px;
    padding: 8px 0;
  }
  .countdown-box span {
    font-size: 18px;
  }
  .countdown-box small {
    font-size: 10px;
  }
}
  </style>
</head>
<body>
  <!-- âœ… Now ALL UI elements are inside <body> -->

  <!-- Top Bar -->
  <div class="top-bar">
    <button class="hamburger-btn" onclick="toggleSidebar()" aria-label="Open menu">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <h1 class="page-title">Products</h1>
  </div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">ClothRun</div>
    </div>
    <button class="sidebar-close" onclick="toggleSidebar()">Ã—</button>
    <ul class="sidebar-nav">
      <li><a href="index.html">Home</a></li>
      <li><a href="index#products.html" onclick="showProducts(); return false;">Products</a></li>
      <li><a href="index1.html#summer-event" onclick="showSummerEvent(); return false;">Summer Event</a></li>
    </ul>
  </div>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

  <!-- Cart Button -->
  <button class="cart-btn" onclick="toggleCart()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
    </svg>
    <span class="cart-count" id="cartCount">0</span>
  </button>

  <!-- Main Content -->
  <div class="section">
    <!-- Search -->
    <div class="search-container">
      <div class="search-box">
        <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input type="text" id="searchInput" placeholder="Search products..." oninput="filterProducts()">
        <button id="searchClear" class="search-clear" onclick="clearSearch()">Ã—</button>
      </div>
    </div>

    <!-- Categories -->
    <div class="categories">
      <button class="category-btn active" data-category="all">All</button>
      <button class="category-btn" data-category="cloth">Cloth</button>
      <button class="category-btn" data-category="pants">Pants</button>
      <button class="category-btn" data-category="accessories">Accessories</button>
    </div>
  </div>

  <!-- Special Promo Section (wrapped in .section) -->
  <div class="section">
    <h2 class="section-title special-promo-title">Special <span>Promo</span></h2>
     <!-- Countdown Timer â€” between promo and all products -->
<div id="countdownTimer" class="countdown-timer-section">
  <div class="countdown-timer-wrapper">
    <span class="countdown-label">Special Promo Countdown</span>
    <div class="countdown-boxes">
      <div class="countdown-box">
        <span id="days">00</span>
        <small>Days</small>
      </div>
      <div class="countdown-box">
        <span id="hours">00</span>
        <small>Hours</small>
      </div>
      <div class="countdown-box">
        <span id="minutes">00</span>
        <small>Min</small>
      </div>
      <div class="countdown-box">
        <span id="seconds">00</span>
        <small>Sec</small>
      </div>
    </div>
  </div>
</div>
    <div class="product-grid" id="promoGrid"></div>
  </div>

  <!-- Products Section (wrapped in .section) -->
  <div class="section">
    <h2 class="section-title">All Products</h2>
    <div class="product-grid" id="productGrid"></div>
  </div>

  <!-- No Results -->
  <div class="no-results" id="noResults">
    <h3>No Results</h3>
    <p>Try a different keyword or category</p>
  </div>

  <!-- Product Details Modal -->
  <div class="product-details-modal" id="productDetailsModal">
    <div class="close-details-btn" onclick="closeProductDetails()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </div>
    <div class="modal-header">
      <h1 class="page-title-details">Product Details</h1>
    </div>
    <div class="product-section-details">
      <div class="image-slider-container">
        <div class="image-slider-details" id="detailsImageSlider"></div>
        <button class="slider-nav-btn prev" id="sliderPrevBtn" onclick="changeSlide(-1)">â€¹</button>
        <button class="slider-nav-btn next" id="sliderNextBtn" onclick="changeSlide(1)">â€º</button>
        <div class="image-counter" id="imageCounter">1 / 1</div>
      </div>
      <div class="product-info-details">
        <div class="product-title-details" id="detailsTitle">Product Name</div>
        <div class="product-price-details" id="detailsPrice">Rp 0</div>
        <div class="product-description-details" id="detailsDescription">Product description will appear here.</div>
        <!-- Color Selection -->
        <div class="color-selection">
          <div class="section-title-details">Color</div>
          <div class="color-options" id="colorOptions"></div>
        </div>
        <button class="add-to-cart-details-btn" id="detailsAddToCartBtn">Add to Cart</button>
      </div>
    </div>
  </div>

  <!-- Size Selection Modal -->
  <div class="size-modal" id="sizeModal">
    <div class="size-modal-content">
      <div class="size-modal-header">
        <h2 class="size-modal-title">Select Size</h2>
        <button class="size-modal-close" onclick="closeSizeModal()">Ã—</button>
      </div>
      <div class="size-product-info">
        <img src="" alt="" class="size-product-image" id="sizeProductImage">
        <div class="size-product-details">
          <div class="size-product-name" id="sizeProductName"></div>
          <div class="size-product-price" id="sizeProductPrice"></div>
        </div>
      </div>
      <label class="size-selection-label">Choose your size:</label>
      <div class="size-options" id="sizeOptions"></div>
      <button class="size-confirm-btn" id="sizeConfirmBtn" disabled>Add to Cart</button>
      <div class="size-error-message" id="sizeErrorMessage">Please select a size</div>
    </div>
  </div>

  <!-- Cart Section -->
  <div class="cart-section" id="cartSection">
    <div class="cart-header">
      <button class="close-cart" onclick="toggleCart()">Ã—</button>
      <h1>Your Cart</h1>
      <p>Review your items and proceed to checkout</p>
    </div>
    <div class="cart-content">
      <div class="customer-form">
        <h3>Customer Information</h3>
        <div class="form-row">
          <input type="text" class="input-field" placeholder="Your Name *" id="customerName">
          <input type="email" class="input-field" placeholder="Your Email *" id="customerEmail">
        </div>
        <div class="promo-section">
          <input type="text" class="input-field" placeholder="Promo Code (Optional)" id="promoCode">
          <button class="promo-btn" onclick="applyPromo()">Apply</button>
          <div id="promoMessage" style="margin-top:10px; font-size:14px;"></div>
        </div>
      </div>
      
        <div class="receipt-items" id="cartItems">
          <div class="empty-cart">
            <div class="empty-cart-icon">ðŸ›’</div>
            <h3>Your cart is empty</h3>
            <p>Add some products to get started!</p>
            <button class="continue-shopping" onclick="toggleCart()">Continue Shopping</button>
          </div>
        </div>
        <div class="receipt-summary">
          <div class="summary-row total"><span>Total Amount</span><span id="totalAmount">Rp 0</span></div>
          <button class="checkout-btn" onclick="sendToWhatsApp()" id="checkoutBtn" disabled>Confirm</button>
        </div>
      </div>
    </div>
  </div>

  <script>
// âœ… Products â€” with color support
const products = [
  { 
    id: 1, 
    name: "Men's Gentle style retro knit sweaters", 
    price: 149000, 
    category: "cloth", 
    image: "https://img.alicdn.com/imgextra/i1/1137782382/O1CN01fPgR9L1TT0DRP9Hzs_!!1137782382.jpg_q50.jpg_.webp",
    images: [
      "https://img.alicdn.com/imgextra/i1/1137782382/O1CN01fPgR9L1TT0DRP9Hzs_!!1137782382.jpg_q50.jpg_.webp",
      "https://img.alicdn.com/imgextra/i2/1137782382/O1CN01dJsklv1TT0DPx6vMk_!!1137782382.jpg_q50.jpg_.webp",
      "https://img.alicdn.com/imgextra/i1/1137782382/O1CN01tGLL4M1TT0DQyAdAE_!!1137782382.jpg_q50.jpg_.webp"
    ],
    colors: [
       { name: "Coffee", code: "#6F4E37", imageIndex: 1 },
      { name: "Gray", code: "#808080", imageIndex: 2 },
    ],
    sizes: ["M", "L", "XL","2XL"],
    description: "A timeless retro knit sweater designed to deliver a gentle, refined look for everyday wear. Crafted from soft, high-quality knit fabric, this sweater blends vintage charm with modern comfort." 
  },
  { 
    id: 2, 
    name: "Men's Autumn/Winter New Thick Solid Color Crew Neck Knit Sweater", 
    price: 149000, 
    category: "cloth", 
    image: "https://img.alicdn.com/imgextra/i1/1137782382/O1CN018Sz1ku1TT0PzNxaj8_!!1137782382.jpg_q50.jpg_.webp",
    images: [
      "https://img.alicdn.com/imgextra/i1/1137782382/O1CN018Sz1ku1TT0PzNxaj8_!!1137782382.jpg_q50.jpg_.webp",
      "https://img.alicdn.com/imgextra/i3/1137782382/O1CN019yhHhh1TT0PyDZ5ho_!!1137782382.jpg_q50.jpg_.webp",
      "https://img.alicdn.com/imgextra/i2/1137782382/O1CN01kCcS8S1TT0PvIXUIt_!!1137782382.jpg_q50.jpg_.webp"
    ],
    colors: [
      { name: "Gray", code: "#808080", imageIndex: 0 },
      { name: "Green", code: "#006400", imageIndex: 1 },
      { name: "Blue", code: "#0000FF", imageIndex: 2 }
    ],
    sizes: ["M", "L", "XL","2XL"],
    description: "A warm and stylish thick knit sweater designed for the autumn and winter seasons. Made from premium soft knit fabric that provides excellent warmth and all-day comfort. The classic crew neck design and solid color finish create a clean, modern look thatâ€™s easy to pair with any outfit." 
  },
  { 
    id: 3, 
    name: "Men's ice silk pants summer style", 
    price: 119000, 
    category: "pants", 
    image: "https://img.alicdn.com/imgextra/i1/2503593231/O1CN01lTxY0w1ZjqjesFME1_!!2503593231.jpg_q50.jpg_.webp",
    images: [
      "https://img.alicdn.com/imgextra/i1/2503593231/O1CN01lTxY0w1ZjqjesFME1_!!2503593231.jpg_q50.jpg_.webp",
      "https://img.alicdn.com/imgextra/i2/2503593231/O1CN01vUyNSj1Zjqjki8lM1_!!2503593231.jpg_q50.jpg_.webp",
      "https://img.alicdn.com/imgextra/i1/2503593231/O1CN01MgQhjf1Zjqjlg3WsH_!!2503593231.jpg_q50.jpg_.webp"
    ],
    colors: [
       { name: "Black", code: "#000000", imageIndex: 0 },
      { name: "Green", code: "#90EE90", imageIndex: 1 },
      { name: "Apricot", code: "#FBCEB1", imageIndex: 2 }
    ],
    sizes: ["M", "L", "XL", "2XL","3XL"],
    description: "Stay cool and comfortable all summer long with these lightweight ice silk pants. Made from ultra-smooth, breathable fabric, they offer a refreshing cooling effect thatâ€™s perfect for hot weather." 
  },
  { 
    id: 4, 
    name: "High-Waisted Jeans", 
    price: 299000, 
    category: "pants", 
    image: "https://images.unsplash.com/photo-1612336308010-6f13304cfd67?w=300",
    images: ["https://images.unsplash.com/photo-1612336308010-6f13304cfd67?w=460"],
    colors: [{ name: "Blue", code: "#1E90FF", imageIndex: 0 }],
    sizes: ["27", "28", "29", "30", "31"],
    description: "Slim-fit high-waisted jeans with premium stretch denim." 
  },
  { 
    id: 5, 
    name: "Leather Crossbody Bag", 
    price: 225000, 
    category: "accessories", 
    image: "https://images.unsplash.com/photo-1548154337-27e7455987fa?w=300",
    images: [
      "https://images.unsplash.com/photo-1548154337-27e7455987fa?w=460",
      "https://images.unsplash.com/photo-1557827166645-53fc6e7a7dcd?w=460"
    ],
    colors: [
      { name: "Brown", code: "#8B4513", imageIndex: 0 },
      { name: "Black", code: "#000000", imageIndex: 1 }
    ],
    sizes: [], // no size
    description: "Genuine leather crossbody bag. Adjustable strap, secure zipper." 
  },
  { 
    id: 6, 
    name: "Wool Blend Scarf", 
    price: 89000, 
    category: "accessories", 
    image: "https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=300",
    images: ["https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=460"],
    colors: [{ name: "Beige", code: "#F5F5DC", imageIndex: 0 }],
    sizes: [], // no size
    description: "Soft wool-blend scarf in earthy tones. Lightweight yet warm." 
  },
  { 
    id: 7, 
    name: "Oversized Hoodie", 
    price: 219000, 
    category: "cloth", 
    image: "https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=300",
    images: [
      "https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=460",
      "https://images.unsplash.com/photo-1576567281307-87e423925550?w=460"
    ],
    colors: [
      { name: "Gray", code: "#A9A9A9", imageIndex: 0 },
      { name: "Black", code: "#000000", imageIndex: 1 }
    ],
    sizes: ["S", "M", "L", "XL", "XXL"],
    description: "Cozy oversized hoodie with kangaroo pocket and ribbed cuffs." 
  },
  { 
    id: 8, 
    name: "Canvas Tote Bag", 
    price: 65000, 
    category: "accessories", 
    image: "https://images.unsplash.com/photo-1601926792744-9e035106f9cc?w=300",
    images: [
      "https://images.unsplash.com/photo-1601926792744-9e035106f9cc?w=460",
      "https://images.unsplash.com/photo-1552547290-3681a52a4f8d?w=460"
    ],
    colors: [
      { name: "Natural", code: "#F8F4E6", imageIndex: 0 },
      { name: "Black", code: "#000000", imageIndex: 1 }
    ],
    sizes: [], // no size
    description: "Eco-friendly canvas tote with reinforced handles." 
  }
];
// ================================
// CONFIG
// ================================
const discountRate = 10;
const discountProducts = [1, 3, 5];
let isDiscountActive = true;
const promoList = {
  "DISKON20": { type: "percent", value: 20 },
  "GAG123": { type: "percent", value: 5 }
};
// ================================
// GLOBAL STATE
// ================================
let cart = [];
let currentDiscount = 0;
let appliedPromo = null;
let selectedSize = null;
let selectedColor = null;
let currentProductForColor = null;
let currentProductForSize = null;
// ================================
// RENDERING â€” Enhanced & Filtered
// ================================
const productGrid = document.getElementById('productGrid');
const promoGrid = document.getElementById('promoGrid');
const categoryButtons = document.querySelectorAll('.category-btn');
let currentCategory = 'all';
function renderProducts(category = 'all') {
  if (!productGrid) return;
  const filtered = category === 'all' 
    ? products 
    : products.filter(p => p.category === category);
  productGrid.innerHTML = filtered.length > 0 
    ? filtered.map(renderProductCard).join('')
    : `<div class="no-results"><h3>No Products</h3><p>Nothing here in <strong>${category}</strong> category.</p></div>`;
}
function renderPromoProducts(category = 'all') {
  if (!promoGrid) return;
  let promoItems = isDiscountActive 
    ? products.filter(p => discountProducts.includes(p.id))
    : [];
  if (category !== 'all') {
    promoItems = promoItems.filter(p => p.category === category);
  }
  promoGrid.innerHTML = promoItems.length > 0
    ? promoItems.map(renderProductCard).join('')
    : `<div class="no-results"><p>No active promotions in this category.</p></div>`;
}
function renderProductCard(product) {
  const isDiscount = isDiscountActive && discountProducts.includes(product.id);
  const finalPrice = isDiscount 
    ? Math.round(product.price * (1 - discountRate / 100)) 
    : product.price;
  return `
    <div class="product-card" data-name="${product.name.toLowerCase()}" 
         data-category="${product.category}"
         onclick="showProductDetails(${product.id})">
      <img src="${product.image}" alt="${product.name}" loading="lazy">
      <div class="product-name">${product.name}</div>
      <div class="product-price">
        ${isDiscount 
          ? `<s>Rp ${product.price.toLocaleString('id-ID')}</s> 
             <strong>Rp ${finalPrice.toLocaleString('id-ID')}</strong>`
          : `Rp ${product.price.toLocaleString('id-ID')}`
        }
      </div>
      ${isDiscount ? `<span class="product-badge">Promo</span>` : ''}
    </div>
  `;
}
// ================================
// CATEGORY FILTERING
// ================================
categoryButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    categoryButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentCategory = btn.dataset.category;
    renderProducts(currentCategory);
  });
});
// ================================
// COLOR SELECTION
// ================================
function selectColor(colorName, imageIndex) {
  const product = currentProductForColor;
  if (!product || !product.colors) return;
  // Update UI
  document.querySelectorAll('.color-option').forEach(el => el.classList.remove('selected'));
  const selectedEl = Array.from(document.querySelectorAll('.color-option'))
    .find(el => el.dataset.color === colorName);
  if (selectedEl) selectedEl.classList.add('selected');
  // Update state & image
  selectedColor = colorName;
  currentSlideIndex = imageIndex;
  updateSliderDisplay();
}
// ================================
// SIZE MODAL
// ================================
function showSizeModal(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  currentProductForSize = product;
  selectedSize = null;
  const modal = document.getElementById('sizeModal');
  const img = document.getElementById('sizeProductImage');
  const name = document.getElementById('sizeProductName');
  const price = document.getElementById('sizeProductPrice');
  const opts = document.getElementById('sizeOptions');
  const btn = document.getElementById('sizeConfirmBtn');
  const err = document.getElementById('sizeErrorMessage');
  if (img) {
    const colorObj = product.colors?.find(c => c.name === selectedColor);
    img.src = product.images?.[colorObj?.imageIndex || 0] || product.image;
  }
  if (name) {
    const colorText = selectedColor ? ` (${selectedColor})` : '';
    name.textContent = product.name + colorText;
  }
  const isDiscount = isDiscountActive && discountProducts.includes(productId);
  const finalPrice = isDiscount ? Math.round(product.price * (1 - discountRate / 100)) : product.price;
  if (price) {
    price.innerHTML = isDiscount
      ? `<s style="color:#999;font-size:14px;">Rp ${product.price.toLocaleString('id-ID')}</s><br>Rp ${finalPrice.toLocaleString('id-ID')}`
      : `Rp ${product.price.toLocaleString('id-ID')}`;
  }
  if (opts) {
    opts.innerHTML = '';
    product.sizes.forEach(size => {
      const el = document.createElement('div');
      el.className = 'size-option';
      el.textContent = size;
      el.addEventListener('click', () => selectSize(size));
      opts.appendChild(el);
    });
  }
  if (btn) {
    btn.disabled = true;
    btn.onclick = confirmSizeSelection;
  }
  if (err) err.style.display = 'none';
  modal.classList.add('active');
  document.body.style.overflow = 'hidden';
}
function selectSize(size) {
  selectedSize = size;
  document.querySelectorAll('.size-option').forEach(el => el.classList.remove('selected'));
  const selectedEl = Array.from(document.querySelectorAll('.size-option'))
    .find(el => el.textContent.trim() === size.toString());
  if (selectedEl) selectedEl.classList.add('selected');
  const btn = document.getElementById('sizeConfirmBtn');
  const err = document.getElementById('sizeErrorMessage');
  if (btn) btn.disabled = false;
  if (err) err.style.display = 'none';
}
function confirmSizeSelection() {
  if (!selectedSize || !currentProductForSize) {
    const err = document.getElementById('sizeErrorMessage');
    if (err) {
      err.textContent = 'Please select a size';
      err.style.display = 'block';
    }
    return;
  }
  addToCartWithColorAndSize(currentProductForSize.id, selectedColor, selectedSize);
  closeSizeModal();
}
function closeSizeModal() {
  const modal = document.getElementById('sizeModal');
  if (modal) {
    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
  }
  selectedSize = null;
  currentProductForSize = null;
}
// ================================
// ADD TO CART (with color + size)
// ================================
function confirmAddToCart(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  if (product.sizes && product.sizes.length > 0) {
    if (product.colors && product.colors.length > 0 && !selectedColor) {
      showNotification("Please select a color first");
      return;
    }
    showSizeModal(productId);
    return;
  }
  if (product.colors && !selectedColor) {
    showNotification("Please select a color");
    return;
  }
  addToCartWithColorAndSize(productId, selectedColor, selectedSize);
  closeProductDetails();
}
function addToCartWithColorAndSize(productId, color = null, size = null) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  const isDiscount = isDiscountActive && discountProducts.includes(productId);
  const finalPrice = isDiscount ? Math.round(product.price * (1 - discountRate / 100)) : product.price;
  const existingItem = cart.find(item =>
    item.id === productId &&
    (item.color === color || (!item.color && !color)) &&
    (item.size === size || (!item.size && !size))
  );
  if (existingItem) {
    existingItem.quantity += 1;
  } else {
    cart.push({
      ...product,
      quantity: 1,
      finalPrice,
      color,
      size
    });
  }
  saveCartToLocalStorage();
  updateCartDisplay();
  const msg = `${product.name}` +
    (color ? ` (${color})` : '') +
    (size ? ` Size ${size}` : '') +
    ` added to cart!`;
  showNotification(msg);
}
// ================================
// PRODUCT DETAILS MODAL
// ================================
let currentSlideIndex = 0;
let totalSlides = 0;
function showProductDetails(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  const modal = document.getElementById('productDetailsModal');
  const title = document.getElementById('detailsTitle');
  const price = document.getElementById('detailsPrice');
  const desc = document.getElementById('detailsDescription');
  const slider = document.getElementById('detailsImageSlider');
  const btn = document.getElementById('detailsAddToCartBtn');
  const colorOpts = document.getElementById('colorOptions');
  // Reset state
  selectedColor = null;
  selectedSize = null;
  currentProductForColor = product;
  if (title) title.textContent = product.name;
  const isDiscount = isDiscountActive && discountProducts.includes(productId);
  const finalPrice = isDiscount ? Math.round(product.price * (1 - discountRate / 100)) : product.price;
  if (price) {
    price.innerHTML = isDiscount
      ? `<s style="color:#999;font-size:20px;">Rp ${product.price.toLocaleString('id-ID')}</s><br>Rp ${finalPrice.toLocaleString('id-ID')}`
      : `Rp ${product.price.toLocaleString('id-ID')}`;
  }
  if (desc) desc.textContent = product.description || 'No description available.';
  // Images
  const images = product.images || [product.image];
  totalSlides = images.length;
  currentSlideIndex = 0;
  if (slider) {
    slider.innerHTML = images.map((src, i) => 
      `<img src="${src}" alt="${product.name}" class="${i === 0 ? 'active' : ''}">`
    ).join('');
  }
  // âœ… COLOR OPTIONS
  if (colorOpts && product.colors && product.colors.length > 0) {
    colorOpts.innerHTML = product.colors.map(color => `
      <div class="color-option" data-color="${color.name}" 
           onclick="selectColor('${color.name}', ${color.imageIndex})">
        <div class="color-swatch" style="background-color: ${color.code};"></div>
        <div class="color-label">${color.name}</div>
      </div>
    `).join('');
    colorOpts.closest('.color-selection').style.display = 'block';
  } else {
    colorOpts.closest('.color-selection').style.display = 'none';
  }
  // Reset Add button
  if (btn) {
    btn.textContent = "Add to Cart";
    btn.onclick = () => confirmAddToCart(productId);
    btn.disabled = false;
  }
  updateSliderDisplay();
  if (modal) {
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
  }
}
function closeProductDetails() {
  const modal = document.getElementById('productDetailsModal');
  if (modal) {
    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
  }
}
function changeSlide(dir) {
  currentSlideIndex = (currentSlideIndex + dir + totalSlides) % totalSlides;
  updateSliderDisplay();
}
function updateSliderDisplay() {
  const imgs = document.querySelectorAll('#detailsImageSlider img');
  const counter = document.getElementById('imageCounter');
  const prev = document.getElementById('sliderPrevBtn');
  const next = document.getElementById('sliderNextBtn');
  imgs.forEach((img, i) => img.classList.toggle('active', i === currentSlideIndex));
  if (counter) counter.textContent = `${currentSlideIndex + 1} / ${totalSlides}`;
  if (prev && next) {
    if (totalSlides <= 1) {
      prev.style.display = 'none';
      next.style.display = 'none';
    } else {
      prev.style.display = 'flex';
      next.style.display = 'flex';
    }
  }
}
// ================================
// CART DISPLAY & UPDATE
// ================================
function updateCartDisplay() {
  const cartCount = document.getElementById('cartCount');
  const cartItems = document.getElementById('cartItems');
  const totalAmount = document.getElementById('totalAmount');
  const checkoutBtn = document.getElementById('checkoutBtn');
  const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
  const subtotal = cart.reduce((sum, item) => sum + ((item.finalPrice || item.price) * item.quantity), 0);
  const total = subtotal - (subtotal * currentDiscount / 100);
  if (cartCount) {
    cartCount.textContent = totalItems;
    cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
  }
  if (cartItems) {
    if (cart.length === 0) {
      cartItems.innerHTML = `
        <div class="empty-cart">
          <div class="empty-cart-icon">ðŸ›’</div>
          <h3>Your cart is empty</h3>
          <p>Add some products to get started!</p>
          <button class="continue-shopping" onclick="toggleCart()">Continue Shopping</button>
        </div>
      `;
      if (checkoutBtn) checkoutBtn.disabled = true;
    } else {
      cartItems.innerHTML = cart.map((item, index) => {
        const itemPrice = item.finalPrice || item.price;
        const colorText = item.color ? `<div style="font-size:13px;color:#666;">Color: ${item.color}</div>` : '';
        const sizeText = item.size ? `<div style="font-size:13px;color:#666;margin-top:2px;">Size: ${item.size}</div>` : '';
        return `
          <div class="receipt-item">
            <img src="${item.image}" alt="${item.name}" class="item-image">
            <div class="item-info">
              <div class="item-name">${item.name}${colorText}${sizeText}</div>
              <div class="item-controls">
                <button class="qty-btn" onclick="updateQuantity(${index}, -1)">-</button>
                <span class="quantity">${item.quantity}</span>
                <button class="qty-btn" onclick="updateQuantity(${index}, 1)">+</button>
              </div>
            </div>
            <div class="item-price">Rp ${(itemPrice * item.quantity).toLocaleString('id-ID')}</div>
          </div>
        `;
      }).join('');
      if (checkoutBtn) checkoutBtn.disabled = false;
    }
  }
  if (totalAmount) {
    totalAmount.textContent = `Rp ${total.toLocaleString('id-ID')}`;
  }
}
function updateQuantity(cartIndex, change) {
  if (cartIndex < 0 || cartIndex >= cart.length) return;
  const item = cart[cartIndex];
  item.quantity += change;
  if (item.quantity <= 0) {
    cart.splice(cartIndex, 1);
  }
  saveCartToLocalStorage();
  updateCartDisplay();
}
// ================================
// LOCALSTORAGE
// ================================
function saveCartToLocalStorage() {
  localStorage.setItem('clothrunCart', JSON.stringify(cart));
  localStorage.setItem('clothrunPromo', JSON.stringify(appliedPromo));
  localStorage.setItem('clothrunDiscount', currentDiscount.toString());
}
function loadCartFromLocalStorage() {
  const savedCart = localStorage.getItem('clothrunCart');
  const savedPromo = localStorage.getItem('clothrunPromo');
  const savedDiscount = localStorage.getItem('clothrunDiscount');
  if (savedCart) cart = JSON.parse(savedCart);
  if (savedPromo) appliedPromo = JSON.parse(savedPromo);
  if (savedDiscount) currentDiscount = parseFloat(savedDiscount);
}
function clearCartFromLocalStorage() {
  localStorage.removeItem('clothrunCart');
  localStorage.removeItem('clothrunPromo');
  localStorage.removeItem('clothrunDiscount');
}
// ================================
// PROMO
// ================================
function applyPromo() {
  const input = document.getElementById("promoCode");
  const msg = document.getElementById("promoMessage");
  if (!input || !msg) return;
  const code = input.value.trim().toUpperCase();
  input.value = '';
  if (appliedPromo) {
    msg.style.color = "red";
    msg.textContent = "Promo already applied.";
    return;
  }
  if (promoList[code]) {
    const promo = promoList[code];
    appliedPromo = { code, ...promo };
    currentDiscount = promo.value;
    msg.style.color = "green";
    msg.textContent = `Promo ${code} applied! ${promo.value}% off`;
    saveCartToLocalStorage();
    updateCartDisplay();
  } else if (code) {
    msg.style.color = "red";
    msg.textContent = "Invalid promo code.";
  }
}
// ================================
// WHATSAPP & CHECKOUT
// ================================
function sendToWhatsApp() {
  const name = document.getElementById('customerName')?.value.trim();
  const email = document.getElementById('customerEmail')?.value.trim();
  if (!name || !email) {
    alert('Please fill in your name and email');
    return;
  }
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    alert('Please enter a valid email address');
    return;
  }
  const subtotal = cart.reduce((sum, item) => sum + ((item.finalPrice || item.price) * item.quantity), 0);
  const total = subtotal - (subtotal * currentDiscount / 100);
  let message = `*ClothRun Store Order*
`;
  message += `Customer: ${name}
`;
  message += `Email: ${email}
`;
  message += `*ORDER DETAILS:*
`;
  cart.forEach(item => {
    const price = item.finalPrice || item.price;
    const colorText = item.color ? ` | Color: ${item.color}` : '';
    const sizeText = item.size ? ` | Size: ${item.size}` : '';
    message += `â€¢ ${item.name}${colorText}${sizeText}
`;
    message += `  Qty: ${item.quantity} Ã— Rp ${price.toLocaleString('id-ID')}
`;
    message += `  Subtotal: Rp ${(price * item.quantity).toLocaleString('id-ID')}
`;
  });
  if (currentDiscount > 0) {
    message += `Subtotal: Rp ${subtotal.toLocaleString('id-ID')}
`;
    message += `Discount (${currentDiscount}%): -Rp ${(subtotal * currentDiscount / 100).toLocaleString('id-ID')}
`;
  }
  message += `*TOTAL: Rp ${total.toLocaleString('id-ID')}*
`;
  message += `Thank you for your order!`;
  window.open(`https://wa.me/082382052250?text=${encodeURIComponent(message)}`, '_blank');
  setTimeout(() => {
    cart = [];
    appliedPromo = null;
    currentDiscount = 0;
    clearCartFromLocalStorage();
    updateCartDisplay();
    toggleCart();
    document.getElementById('customerName').value = '';
    document.getElementById('customerEmail').value = '';
    document.getElementById('promoMessage').textContent = '';
  }, 1000);
}
// ================================
// SEARCH & UI
// ================================
function filterProducts() {
  const query = document.getElementById('searchInput')?.value.trim().toLowerCase() || '';
  const cards = document.querySelectorAll('.product-card');
  const clearBtn = document.getElementById('searchClear');
  const noRes = document.getElementById('noResults');

  // âœ… Get UI elements to hide/show
  const categories = document.querySelector('.categories');
  const promoSection = document.querySelector('.section-title.special-promo-title')?.closest('.section'); // includes countdown & promo grid
  const allProductsTitle = document.querySelector('.section-title:not(.special-promo-title)'); // first non-promo title = "All Products"
  const countdownTimer = document.getElementById('countdownTimer');

  if (query) {
    // ðŸ”½ HIDE during search
    if (categories) categories.style.display = 'none';
    if (promoSection) promoSection.style.display = 'none';
    if (allProductsTitle) allProductsTitle.style.display = 'none';
    if (countdownTimer) countdownTimer.style.display = 'none';

    // ðŸ” Show only matching cards (from *any* section)
    let found = false;
    cards.forEach(card => {
      const name = card.getAttribute('data-name');
      const matches = name?.includes(query);
      card.classList.toggle('hidden', !matches);
      if (matches) found = true;
    });

    // Show/hide "No Results"
    if (noRes) noRes.style.display = found ? 'none' : 'block';

  } else {
    // ðŸ”¼ RESTORE when cleared
    if (categories) categories.style.display = 'flex';
    if (promoSection) promoSection.style.display = 'block';
    if (allProductsTitle) allProductsTitle.style.display = 'block';
    if (countdownTimer) countdownTimer.style.display = 'block';

    cards.forEach(card => card.classList.remove('hidden'));
    if (noRes) noRes.style.display = 'none';
  }

  // Toggle clear button
  if (clearBtn) clearBtn.style.display = query ? 'block' : 'none';
}
function clearSearch() {
  const inp = document.getElementById('searchInput');
  if (inp) inp.value = '';
  filterProducts();
}
function toggleCart() {
  const cartSection = document.getElementById('cartSection');
  if (!cartSection) return;
  const isOpen = cartSection.style.display === 'block';
  cartSection.style.display = isOpen ? 'none' : 'block';
  document.body.style.overflow = isOpen ? 'auto' : 'hidden';
}
function showNotification(msg) {
  const notif = document.createElement('div');
  notif.textContent = msg;
  notif.style.cssText = `
    position: fixed; top: 80px; right: 20px; background: #4CAF50; color: white;
    padding: 15px 25px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    z-index: 10000; animation: slideIn 0.3s ease-out;
  `;
  document.body.appendChild(notif);
  setTimeout(() => {
    notif.style.animation = 'slideOut 0.3s ease-in';
    setTimeout(() => notif.remove(), 300);
  }, 2000);
}
// ================================
// INIT
// ================================
document.addEventListener('DOMContentLoaded', () => {
  loadCartFromLocalStorage();
  renderProducts('all');
  renderPromoProducts('all'); // âœ… pass argument
  updateCartDisplay();

  // âœ… Event delegation untuk kategori
  const categoriesContainer = document.querySelector('.categories');
  if (categoriesContainer) {
    categoriesContainer.addEventListener('click', (e) => {
      const btn = e.target.closest('.category-btn');
      if (!btn) return;

      categoriesContainer.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      currentCategory = btn.dataset.category || 'all';
      renderProducts(currentCategory);
      renderPromoProducts(currentCategory);
    });
  }
});
// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    const pdm = document.getElementById('productDetailsModal');
    const sm = document.getElementById('sizeModal');
    if (pdm?.classList.contains('active')) closeProductDetails();
    else if (sm?.classList.contains('active')) closeSizeModal();
  }
});
// ========== SIDEBAR TOGGLE ==========
function toggleSidebar() {
  const sidebar = document.getElementById('sidebar');
  sidebar.classList.toggle('active');
  // âœ… Toggle overlay too
  const overlay = document.querySelector('.sidebar-overlay');
  if (overlay) overlay.style.display = sidebar.classList.contains('active') ? 'block' : 'none';
}
// ========== NAVIGASI HALAMAN ==========
function showProducts() {
  // âœ… Munculkan semua section kecuali summer event
  document.querySelectorAll('.section').forEach(sec => {
    if (sec.id === 'summerEventSection') {
      sec.style.display = 'none';
    } else {
      sec.style.display = 'block';
    }
  });

  // âœ… Tampilkan search & categories
  const searchSection = document.querySelector('.search-container')?.closest('.section');
  const categories = document.querySelector('.categories');
  if (searchSection) searchSection.style.display = 'block';
  if (categories) categories.style.display = 'flex';

  // Update title
  const pageTitle = document.querySelector('.page-title');
  if (pageTitle) pageTitle.textContent = 'Products';

  toggleSidebar();
}

function showSummerEvent() {
  // âœ… Ambil section berdasarkan ID atau class lebih pasti
  const promoSection = document.querySelector('.section-title.special-promo-title')?.closest('.section');
  const productsSection = document.getElementById('productGrid')?.closest('.section');

  if (promoSection) promoSection.style.display = 'none';
  if (productsSection) productsSection.style.display = 'none';

  // âœ… Sembunyikan search & categories
  const searchSection = document.querySelector('.search-container')?.closest('.section');
  const categories = document.querySelector('.categories');
  if (searchSection) searchSection.style.display = 'none';
  if (categories) categories.style.display = 'none';

  // Render Summer Event
  let summerSection = document.getElementById('summerEventSection');
  if (!summerSection) {
    summerSection = document.createElement('div');
    summerSection.id = 'summerEventSection';
    summerSection.className = 'section';
    // Sisipkan setelah header/top-bar
    const mainContent = document.querySelector('.top-bar');
    if (mainContent) mainContent.after(summerSection);
    else document.body.prepend(summerSection);
  }

  const summerProductIds = [1, 2, 5]; // âœ… Hanya produk ini yang muncul
  const summerItems = products.filter(p => summerProductIds.includes(p.id));

  summerSection.innerHTML = `
    <h2 class="section-title active">Summer Event</h2>
    <div class="product-grid" id="summerEventGrid">
      ${summerItems.length 
        ? summerItems.map(renderProductCard).join('') 
        : `<div class="no-results"><p>No items in this Summer Event.</p></div>`}
    </div>
  `;
  summerSection.style.display = 'block';

  // Sembunyikan section lain (fallback jika ada duplikat)
  document.querySelectorAll('.section').forEach(sec => {
    if (sec.id !== 'summerEventSection' && sec !== summerSection) {
      const title = sec.querySelector('.section-title');
      if (title && title.textContent.trim() !== 'Summer Event') {
        sec.style.display = 'none';
      }
    }
  });

  const pageTitle = document.querySelector('.page-title');
  if (pageTitle) pageTitle.textContent = 'Summer Event';
  
  toggleSidebar();
}
// âœ… Auto-load Summer Event if hash is #summer-event
window.addEventListener('load', () => {
  if (window.location.hash === '#summer-event') {
    setTimeout(showSummerEvent, 50);
  }
});
// âœ… Countdown: pastikan DOM siap & aman
document.addEventListener('DOMContentLoaded', () => {
  const targetTime = new Date('2025-12-31T23:59:59+07:00').getTime();
  
  function updateCountdown() {
    const now = Date.now();
    const diff = targetTime - now;

    if (diff <= 0) {
      const promoSection = document.querySelector('.section-title.special-promo-title')?.closest('.section');
      const countdownEl = document.getElementById('countdownTimer');
      if (promoSection) promoSection.remove();
      if (countdownEl) countdownEl.remove();
      clearInterval(interval);
      return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const secs = Math.floor((diff % (1000 * 60)) / 1000);

    // âœ… Update hanya jika element ada
    const daysEl = document.getElementById('days');
    const hoursEl = document.getElementById('hours');
    const minsEl = document.getElementById('minutes');
    const secsEl = document.getElementById('seconds');

    if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
    if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
    if (minsEl) minsEl.textContent = String(mins).padStart(2, '0');
    if (secsEl) secsEl.textContent = String(secs).padStart(2, '0');
  }

  // âœ… First update after slight delay (to ensure DOM paint)
  setTimeout(() => {
    updateCountdown();
    const interval = setInterval(updateCountdown, 1000);
    // Store interval if needed
    window._countdownInterval = interval;
  }, 100);
});
  </script>
</body>
</html>



